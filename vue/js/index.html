<html>
    <head>
        <script src="vue.3.5.js"></script>
        <script src="axios.min.js"></script>
        <link rel="stylesheet" type="text/css" href="ui.css"> </link>
    </head>
    <body>
        <div class="outer">
            <div style="width:1250px; " id="app">
                <button @click="testClick" > Test </button>
                <stock-table style='width:700px; '  ref="stable" url="http://localhost:8080/lhb?day=20260202" day="2026-02-02"
                        :datas="datas"    :columns ="columns"  @dblclick-row="dbRow">
                </stock-table>
            </div>
        </div>
    </body>

<script type="module">
    import {StockTable, registerComponents, PopupWindow} from './ui.js'
    import {deepCopy} from './utils.js'
    // const { createApp } = Vue;
    var app = Vue.createApp({
        data() {
            let dd = [];
            for (let i = 0; i < 20; i++) dd.push({code : `code-${i}`, name: 'name-' + i});
            let xbRender = function(h, rowData, c) {return rowData.xb + '-K'}
            return {
                columns: [{key: '_index_', title: '序号', width: 60, style: {'background-color': '#cdcdcd'}},
                            {key: 'code', title: '代码/名称', sortable: true},
                            {key: 'name', title:'名称', sortable: true}],
                datas: dd,
            }
        },
        methods: {
            testClick() {
                console.log('click test button');
                let cc = Vue.h(StockTable, {columns: deepCopy(this.columns), datas: deepCopy(this.datas), style: 'width: 100%;'});
                let div = Vue.h('div', {class: 'content', style: 'left: 300px; top: 100px; overflow:auto;width:300px; height: 300px; background-color: #f0f0dd;'}, cc);
                PopupWindow.open(div);
            },
            dbRow(rowData, column) {
            },
        },
        mounted() {
            console.log('onmounted:', this.$refs.stable);
        }
    });
    registerComponents(app);
    app.mount('#app');
</script>
    
</html>